<html> <head> <meta http-equiv="Content-Type" content="text/html; charset=gb2312" /> <title></title> <link href="inc/style.css" rel="stylesheet" type="text/css"> </head>  <body class=infobody> <table width="100%" height="100%" cellspacing="0">  <tr>  <td valign="top"> <table>   <tr>   <td height=25></td>   </tr>           <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="border-bottom:#1873b5 solid 1px">             <tr><td style="background-image:url(images/cinfo_left.GIF);display:" width="5"></td>               <td width="86" height="28" style="padding-left:4px;padding-right:4px;background-image:url(images/cinfo_center.GIF);color:#3081bd;text-align:center;padding-bottom:0px;padding-top:4px;display:"><nobr>内容摘要</nobr></td> <td style="background-image:url(images/cinfo_right.GIF);display:" width="5"></td>               <td>&nbsp;</td>             </tr>           </table>           <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" style="border:#1873b5 solid 1px;border-top:0px">             <tr>               <td bgcolor="#F5FAFA" style="padding-left:20;padding-right:20px" id="ptitle">六. 管理信息库MIB<BR>&nbsp;&nbsp;&nbsp; 1.&nbsp; 访问MIB变量</td>             </tr>           </table> <table>   <tr>   <td height=25></td>   </tr>           <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="border-bottom:#1873b5 solid 1px">             <tr><td style="background-image:url(images/cinfo_left.GIF);display:" width="5"></td>               <td width="86" height="28" style="padding-left:4px;padding-right:4px;background-image:url(images/cinfo_center.GIF);color:#3081bd;text-align:center;padding-bottom:0px;padding-top:4px;display:"><nobr>相关内容</nobr></td> <td style="background-image:url(images/cinfo_right.GIF);display:" width="5"></td>               <td>&nbsp;</td>             </tr>           </table>           <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" style="border:#1873b5 solid 1px;border-top:0px">             <tr>               <td bgcolor="#F5FAFA" style="padding-left:20;padding-right:20px" id="ptitle"><P><STRONG>六. 管理信息库MIB</STRONG><BR>&nbsp;&nbsp;&nbsp; MIB2（管理信息库版本2）是网络管理中的第二个构件。每一个代理有它自己的MIB2，这是管理器能够管理的所有对象的集合。在MIB2中的对象分成10个不同的组：system（系统）、interface（接口）、address translation（地址转换）、ip、icmp、tcp、udp、egp、transmission（传输）和snmp。这些组都在对象标识符树中mib-2对象的下面，如下图所示。每一个组定义一些变量和表。</P>
<P align=center><IMG src="../upload/1223253707375_pic.gif"></P>
<P align=center>图9-8&nbsp; MIB</P>
<P>&nbsp;&nbsp;&nbsp; 下面是一些对象的简单描述。<BR>&nbsp;&nbsp;&nbsp; sys：系统定义有关这个节点（系统）的一般信息，如名字、位置和寿命。<BR>&nbsp;&nbsp;&nbsp; if：接口定义有关这个节点的所有接口的信息，如接口号、物理地址和IP地址。<BR>&nbsp;&nbsp;&nbsp; at：地址转换定义有关ARP表的信息。<BR>&nbsp;&nbsp;&nbsp; ip：这个对象定义有关IP的信息，如路由表和IP地址。<BR>&nbsp;&nbsp;&nbsp; icmp：这个对象定义有关ICMP的信息，如已发送和已收到的数据包数，以及产生的差错总数。<BR>&nbsp;&nbsp;&nbsp; tcp：这个对象定义有关TCP的信息，如连接表、超时值、端口号，以及已发送和已收到的数据包数。<BR>&nbsp;&nbsp;&nbsp; udp：这个对象定义有关UDP的信息，如端口号、已发送和已收到的数据包数。<BR>&nbsp;&nbsp;&nbsp; snmp：这个对象定义有关SNMP本身的信息。<BR><STRONG>1.&nbsp; 访问MIB变量</STRONG><BR>&nbsp;&nbsp;&nbsp; 下面以udp组作为例子来说明如何访问不同的变量。在udp组有4个简单变量和一个记录序列（表）。下图给出了这些变量和表。</P>
<P align=center><IMG src="../upload/1223253716828_pic.gif"></P>
<P align=center>图9-9&nbsp; udp组</P>
<P>&nbsp;&nbsp;&nbsp; 下面说明如何访问每一个实体。<BR>&nbsp;&nbsp;&nbsp; 访问简单变量时使用组的id（1.3.6.1.2.1.7）后面跟着该变量的id。下面给出了如何访问每一个变量。<BR>&nbsp;&nbsp;&nbsp; udpInDatagrams&nbsp;-&gt;&nbsp;1.3.6.1.2.1.7.1<BR>&nbsp;&nbsp;&nbsp; udpNoPorts&nbsp;&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.2<BR>&nbsp;&nbsp;&nbsp; udpInErrors&nbsp;&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.3<BR>&nbsp;&nbsp;&nbsp; udpOutDatagrams&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.4<BR>&nbsp;&nbsp;&nbsp; 但是，这些对象标识符定义的是变量而不是内容。要给出每一个变量的内容，应该增加内容的后缀。简单变量的内容后缀就是零。例如：<BR>&nbsp;&nbsp;&nbsp; udpInDatagrams&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.1.0<BR>&nbsp;&nbsp;&nbsp; udpNoPorts&nbsp;&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.2.0<BR>&nbsp;&nbsp;&nbsp; udpInErrors&nbsp;&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.3.0<BR>&nbsp;&nbsp;&nbsp; udpOutDatagrams&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.4.0<BR>&nbsp;&nbsp;&nbsp; MIB使用表id标志表。如下图所示，udp只有一个表（id是5）。</P>
<P align=center><IMG src="../upload/1223253724656_pic.gif"></P>
<P align=center>图9-10&nbsp; udp的变量和表</P>
<P>&nbsp;&nbsp;&nbsp; 要访问这个表，应该使用如下的表id：<BR>&nbsp;&nbsp;&nbsp; udpTable&nbsp;&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.5<BR>&nbsp;&nbsp;&nbsp; 但是，这个表还是在树结构的树叶级。因此不能访问这个表，下面定义在这个表（id是1）中的项目：<BR>&nbsp;&nbsp;&nbsp; udpEntry&nbsp;&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.5.1<BR>&nbsp;&nbsp;&nbsp; 这个项目也不是树叶，因此不能访问它。还需要定义这个项目中的每一个实体（字段）。<BR>&nbsp;&nbsp;&nbsp; udpLocalAddress&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.5.1.1<BR>&nbsp;&nbsp;&nbsp; udpLocalPort&nbsp;-&gt;&#61658;&nbsp;1.3.6.1.2.1.7.5.1.2<BR>&nbsp;&nbsp;&nbsp; 这时两个变量都是在树叶上了。这个表对每一个“本地地址/本地端口对”可以有不同的值。要访问表中的特定行，应当给以上的id加上索引。在MIB中，数组的索引不是整数。这些索引是基于在这些项目中的一个或多个字段的值。在例子中，udpTable的索引基于本地地址和本地端口号。</P></td>             </tr>           </table>  </td> </tr> </table> </body> </html> <script> if(window.HTMLElement) {     HTMLElement.prototype.__defineSetter__("outerHTML",function(sHTML){         var r=this.ownerDocument.createRange();         r.setStartBefore(this);         var df=r.createContextualFragment(sHTML);         this.parentNode.replaceChild(df,this);         return sHTML;         });      HTMLElement.prototype.__defineGetter__("outerHTML",function(){      var attr;         var attrs=this.attributes;         var str="<"+this.tagName.toLowerCase();         for(var i=0;i<attrs.length;i++){             attr=attrs[i];             if(attr.specified)                 str+=" "+attr.name+'="'+attr.value+'"';             }         if(!this.canHaveChildren)             return str+">";         return str+">"+this.innerHTML+"</"+this.tagName.toLowerCase()+">";         });           HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){   switch(this.tagName.toLowerCase()){             case "area":             case "base":          case "basefont":             case "col":             case "frame":             case "hr":             case "img":             case "br":             case "input":             case "isindex":             case "link":             case "meta":             case "param":             return false;         }         return true;       }); }  function showMe(i) {  	objHtml=document.all["s"+i].innerHTML; 	date=new Date(); 	if(navigator.userAgent.indexOf("MSIE")>0) 		window.status="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	else 		top.document.title="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	}  	if(navigator.userAgent.indexOf("MSIE")>0) 	var objects=document.all.tags("OBJECT"); 	else 	var objects=document.getElementsByTagName("OBJECT"); 	for(i=0;i<objects.length;i++) { objects[i].style.width="100%"; objects[i].outerHTML="<a href=# onclick=\"showMe("+i+")\">动画演示</a><span id=s"+i+" style=\"display:none\">"+objects[i].outerHTML+"</span>"; } var iHtml=document.body.innerHTML;  </script> 