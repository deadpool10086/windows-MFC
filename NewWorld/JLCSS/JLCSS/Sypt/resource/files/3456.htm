<html> <head> <meta http-equiv="Content-Type" content="text/html; charset=gb2312" /> <title></title> <link href="inc/style.css" rel="stylesheet" type="text/css"> </head>  <body class=infobody> <table width="100%" height="100%" cellspacing="0">  <tr>  <td valign="top"> <table>   <tr>   <td height=25></td>   </tr>           <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="border-bottom:#1873b5 solid 1px">             <tr><td style="background-image:url(images/cinfo_left.GIF);display:" width="5"></td>               <td width="86" height="28" style="padding-left:4px;padding-right:4px;background-image:url(images/cinfo_center.GIF);color:#3081bd;text-align:center;padding-bottom:0px;padding-top:4px;display:"><nobr>附录D 协议编辑器使用说明 </nobr></td> <td style="background-image:url(images/cinfo_right.GIF);display:" width="5"></td>               <td>&nbsp;</td>             </tr>           </table>           <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" style="border:#1873b5 solid 1px;border-top:0px">             <tr>               <td bgcolor="#F5FAFA" style="padding-left:20;padding-right:20px" id="ptitle"><P align=left>1. 协议编辑器简介<BR>协议编辑器主界面如下：</P>
<P align=center><IMG src="../upload/1255153575127_pic.bmp"><BR>图4-1&nbsp; 协议编辑器主界面</P>
<P align=left><BR>本系统的主界面显示分为五个部分：多帧编辑区、单帧编辑区、协议模型图、地址本和十六进制显示区。<BR>1.&nbsp; 多帧编辑区</P>
<P align=center><IMG src="../upload/1255153779952_pic.bmp"><BR>图4-2&nbsp; 多帧编辑区</P>
<P align=left><BR>（1）第一列为帧序号，此序号无其它特殊含义，即为各帧顺序向下的计数号。点击“+”可展开为多行，相邻两帧发送的时间间隔默认值为1000ms，如果点击展开的为第一帧，则为发送延迟时间。发送次数默认为1 次。<BR>（2）第二列为帧的概要信息：<BR>MAC&nbsp;&nbsp; 源地址、目的地址、协议类型（在协议类型下拉框中进行选择）。<BR>LLC&nbsp;&nbsp; LLC Unnumbered/LLC Information/LLC Supervisor，DSAP，Ctrl。<BR>ARP&nbsp;&nbsp; 请求：标明请求的源IP和目的IP。<BR>ARP&nbsp;&nbsp; 应答：标明应答主机IP和MAC地址的对应情况。<BR>IP源IP、目的IP、IP总长度、协议类型（在协议类型下拉框中进行选择），（如果分片或偏移量≠0）Flagment 偏移量：偏移量+（总长度-首部长度-1）。<BR>TCP&nbsp;&nbsp; 源端口、目的端口、TCP类型（SYN，FIN，ACK，RST）、序号、ACK确认序号和窗口大小。<BR>UDP&nbsp;&nbsp; 源端口、目的端口。<BR>2.&nbsp; 单帧编辑区</P>
<P align=center><IMG src="../upload/1255153871854_pic.bmp"><BR>图4-3&nbsp; 单帧编辑区</P>
<P align=left>单帧编辑区分为帧编辑区和提示区两部分，其中帧编辑区可以对协议属性进行编辑，提示区可以根据选中的协议属性给出相应的提示，便于学生了解各属性的含义或范围。<BR>3.&nbsp; 协议模型图<BR>在协议模型图中，以图形化模型显示该协议的封装层次，并与单帧编辑区对应的协议层相互联动，当前被选中的协议层用红色边框显示，如图所示： <BR></P>
<P align=center><IMG src="../upload/1255153918961_pic.bmp"><BR>图4-4&nbsp; 协议模型</P>
<P align=left>4.&nbsp; 地址本<BR>地址本包括两项功能：主机扫描和端口扫描。点击 [ 主机扫描]按钮，系统在当前网络内进行主机扫描，并在地址本中列出扫描到的所有主机。选中一台主机后，可以点击[ 端口扫描]按钮，对该主机进行TCP端口扫描。地址本的主机扫描结果分为三列：角色名称、MAC地址和IP地址。每台主机的端口扫描结果也分为三列：端口号、端口类型和服务名称。如图所示： </P>
<P align=center><IMG src="../upload/1255153980009_pic.bmp"><BR>图4-5&nbsp; 地址本</P>
<P align=left>5.&nbsp; 十六进制显示区<BR>十六进制显示区与单帧编辑区是联动的，选中相应的十六进制数据，右键可进行计算校验和、复制字符串、复制16进制数据、计算长度操作。十六进制显示区也可伸缩显示，不需要观看时可单击[隐藏]按钮将其隐藏到下面。如图所示：</P>
<P align=center><IMG src="../upload/1255154027488_pic.bmp"><BR>图4-6&nbsp; 十六进制显示区</P>
<P align=left>6.&nbsp; 协议编辑器菜单栏</P>
<P align=center><IMG src="../upload/1255154101744_pic.bmp"><BR>图4-8&nbsp; 文件菜单</P>
<P align=left>新建文件：新建立一个帧序列文件。<BR>打开文件：打开原有的文件。<BR>保存文件：保存当前正在编辑的帧序列文件。<BR>保存选中帧：保存被选中的帧。<BR>退出：退出协议编辑器。<BR>（2）编辑菜单</P>
<P align=center><IMG src="../upload/1255154172626_pic.bmp"><BR>图4-9&nbsp; 编辑菜单</P>
<P align=left>新建帧：在帧序列的末尾新建一个帧。<BR>插入帧：在当前帧之前插入一个帧。<BR>删除当前帧：删除当前正在编辑的帧。<BR>删除选中帧：删除所有选中的帧。<BR>复制当前帧：将当前帧复制到剪贴板中。<BR>复制选中帧：将所有被选中的帧复制到剪贴板中。<BR>粘贴帧：将剪贴板中的帧粘贴到当前位置。<BR>（3）操作菜单<BR></P>
<P align=center><IMG src="../upload/1255154216860_pic.bmp"><BR>图4-10&nbsp; 操作菜单</P>
<P align=left>全部选中：选中当前所有帧。<BR>反向选择：对当前被选中的帧进行反向选择。<BR>取消选择：取消当前选中的帧。<BR>校验帧：可随时检验编辑的协议帧。<BR>设置时间间隔：对全部帧或选中帧设置发送时间间隔。<BR>设置触发条件：设置数据包触发条件约束。<BR>启动触发：启动触发功能。<BR>发送全部帧：对多帧编辑区中的所有帧进行发送。<BR>发送选中帧：对多帧编辑区中被选中的帧进行发送。<BR>定制发送：自定义发送。在确认是否修改IP标识号、是否修改源IP地址，并重新计算修改校验和后，设置发送时间间隔和发送次数，定制发送当前数据帧。<BR>取消发送：当系统正在发送数据帧时，可以停止发送帧。<BR>（4）设置菜单 </P>
<P align=center><IMG src="../upload/1255154279039_pic.bmp"><BR>图4-11&nbsp; 设置菜单</P>
<P align=left>选择适配器：当主机有两个以上适配器时，选择用来发送数据帧的适配器。<BR>设置端口扫描：对要进行扫描的主机端口进行添加、删除、修改、复位等设置，并可以将自定义的端口信息进行导出和导入。<BR>设置协议颜色：可以自定义不同协议的显示颜色。<BR>加载协议脚本：可以加载自定义协议脚本。<BR>恢复默认协议脚本：可以恢复默认的协议脚本。<BR>系统语言：软件系统语言切换，其中分为中文显示和英文显示，选择一种后重启软件系统进行语言切换。<BR>界面风格：软件界面风格切换，其中包括黄色系和蓝色系，选择一种后进行切换。<BR>（5）视图菜单：</P>
<P align=center><IMG src="../upload/1255154315311_pic.bmp"><BR>图4-12&nbsp; 视图菜单</P>
<P align=left>拓扑验证视图：验证网络网络结构的正确性。<BR>协议编辑视图：进入数据帧协议编辑的主界面。<BR>协议生成视图：进入自定义协议编辑界面。<BR>（6）帮助</P>
<P align=center><IMG src="../upload/1255154364051_pic.bmp"><BR>图 4-13&nbsp; 帮助菜单</P>
<P align=left>帮助主题：显示所有帮助主题。<BR>协议帮助：显示多种协议帮助。<BR>关于：显示版本信息及版权信息。<BR>2. 应用实例<BR>下面通过一个例子来进一步说明本系统的功能与使用方法。<BR>1．编辑MAC层<BR>（1）源MAC地址和目的MAC地址可以在地址本中进行查找，双击后自动添加，这样可以保证填写的MAC地址在网络中真实存在，保证了模拟的真实性。<BR>（2）在协议类型或数据长度字段中选择IP协议。学生可以根据下拉列表框中的项目选择此帧的上层协议，也可以直接填写，系统会根据填写的内容进行字符匹配判断，自动选择上层协议。<BR>（3）编辑MAC层的界面如下图所示：</P>
<P align=center><IMG src="../upload/1255154408896_pic.bmp"><BR>图4-14&nbsp; 编辑MAC层的界面</P>
<P align=left>2．编辑IP层<BR>（1）学生选择IP协议后，单帧编辑区和协议模型图会相应地显示出IP层，如下图所示：<BR>（2）当前IP层为选中状态，协议模型图中以红色线条显示。<BR>（3）单帧编辑区显示IP层需要填写的各种属性。<BR>（4）十六进制显示区显示学生填写的属性的十六进制值。</P>
<P align=center><IMG src="../upload/1255154454792_pic.bmp"><BR>图4-15&nbsp; 编辑IP层的界面</P>
<P align=left>说明：IP层涉及到“校验和”的计算，系统提供了自动计算、手动计算和十六进制显示区右键计算三种方式：<BR>●&nbsp; 自动方式可以直接得出结果，自动填入。<BR>●&nbsp; 手动方式先将IP协议中首部校验和字段置0，根据点击［M］弹出的“手动计算校验和”对话框提示进行计算，并手动将结果填到首部校验和字段。<BR>●&nbsp; 十六进制显示区右键计算的具体计算方法如下：在计算“校验和”前将IP协议中首部校验和字段置0。将涉及到校验和计算的十六进制代码全部选中，点击鼠标右键，在弹出的对话框中选择“计算校验和”，并手动将结果填到首部校验和字段。<BR>3．编辑TCP层<BR>（1）与前两层相同，单帧编辑区和协议模型图进行相应的刷新后，学生就可以填写其相应的属性值了。<BR>（2）在每一层，学生均可以填写“自定义数据”这一选项，但是一旦填写了这一项，<BR>就意味着这个单帧已经编辑完毕，并且按照其填写的数据发送出去。<BR>（3）TCP的上层协议是通过端口来判断的。填写不同的端口，上层协议类型会不同。</P>
<P align=center><IMG src="../upload/1255154492706_pic.bmp"><BR>图4-16&nbsp; 编辑TCP层<BR></P></td>             </tr>           </table>  </td> </tr> </table> </body> </html> <script> if(window.HTMLElement) {     HTMLElement.prototype.__defineSetter__("outerHTML",function(sHTML){         var r=this.ownerDocument.createRange();         r.setStartBefore(this);         var df=r.createContextualFragment(sHTML);         this.parentNode.replaceChild(df,this);         return sHTML;         });      HTMLElement.prototype.__defineGetter__("outerHTML",function(){      var attr;         var attrs=this.attributes;         var str="<"+this.tagName.toLowerCase();         for(var i=0;i<attrs.length;i++){             attr=attrs[i];             if(attr.specified)                 str+=" "+attr.name+'="'+attr.value+'"';             }         if(!this.canHaveChildren)             return str+">";         return str+">"+this.innerHTML+"</"+this.tagName.toLowerCase()+">";         });           HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){   switch(this.tagName.toLowerCase()){             case "area":             case "base":          case "basefont":             case "col":             case "frame":             case "hr":             case "img":             case "br":             case "input":             case "isindex":             case "link":             case "meta":             case "param":             return false;         }         return true;       }); }  function showMe(i) {  	objHtml=document.all["s"+i].innerHTML; 	date=new Date(); 	if(navigator.userAgent.indexOf("MSIE")>0) 		window.status="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	else 		top.document.title="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	}  	if(navigator.userAgent.indexOf("MSIE")>0) 	var objects=document.all.tags("OBJECT"); 	else 	var objects=document.getElementsByTagName("OBJECT"); 	for(i=0;i<objects.length;i++) { objects[i].style.width="100%"; objects[i].outerHTML="<a href=# onclick=\"showMe("+i+")\">动画演示</a><span id=s"+i+" style=\"display:none\">"+objects[i].outerHTML+"</span>"; } var iHtml=document.body.innerHTML;  </script> 