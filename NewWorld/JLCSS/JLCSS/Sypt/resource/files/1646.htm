<html> <head> <meta http-equiv="Content-Type" content="text/html; charset=gb2312" /> <title></title> <link href="inc/style.css" rel="stylesheet" type="text/css"> </head>  <body class=infobody> <table width="100%" height="100%" cellspacing="0">  <tr>  <td valign="top"> <table>   <tr>   <td height=25></td>   </tr>           <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="border-bottom:#1873b5 solid 1px">             <tr><td style="background-image:url(images/cinfo_left.GIF);display:" width="5"></td>               <td width="86" height="28" style="padding-left:4px;padding-right:4px;background-image:url(images/cinfo_center.GIF);color:#3081bd;text-align:center;padding-bottom:0px;padding-top:4px;display:"><nobr>内容摘要</nobr></td> <td style="background-image:url(images/cinfo_right.GIF);display:" width="5"></td>               <td>&nbsp;</td>             </tr>           </table>           <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" style="border:#1873b5 solid 1px;border-top:0px">             <tr>               <td bgcolor="#F5FAFA" style="padding-left:20;padding-right:20px" id="ptitle">一.&nbsp;多播简介与IPv6多播<BR>&nbsp;&nbsp;&nbsp; 1.&nbsp; 多播简介<BR>&nbsp;&nbsp;&nbsp; 2.&nbsp; IPv6多播概述<BR>二.&nbsp;IPv6多播地址<BR>&nbsp;&nbsp;&nbsp; 1.&nbsp; 多播地址结构<BR>&nbsp;&nbsp;&nbsp; 2.&nbsp; IPv6多播地址映射为以太网地址<BR>&nbsp;&nbsp;&nbsp; 3.&nbsp; 请求节点地址</td>             </tr>           </table> <table>   <tr>   <td height=25></td>   </tr>           <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="border-bottom:#1873b5 solid 1px">             <tr><td style="background-image:url(images/cinfo_left.GIF);display:" width="5"></td>               <td width="86" height="28" style="padding-left:4px;padding-right:4px;background-image:url(images/cinfo_center.GIF);color:#3081bd;text-align:center;padding-bottom:0px;padding-top:4px;display:"><nobr>相关内容</nobr></td> <td style="background-image:url(images/cinfo_right.GIF);display:" width="5"></td>               <td>&nbsp;</td>             </tr>           </table>           <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" style="border:#1873b5 solid 1px;border-top:0px">             <tr>               <td bgcolor="#F5FAFA" style="padding-left:20;padding-right:20px" id="ptitle"><P><STRONG>一.&nbsp;多播简介与IPv6多播<BR>1.&nbsp; 多播简介</STRONG><BR>&nbsp;&nbsp;&nbsp; 在IPv4中，多播支持是可选的。而在IPv6中，多播支持是必须的。除了支持单播和泛播，IPv6也会提供一种机制来发送和接收IPv6多播通信流。IPv6多播通信流被发送到一个单一的目的地址，但却可以被多个IPv6主机接收和处理，不管它们位于网络中的何处。主机侦听一个特定的IPv6多播地址，并接收所有发向这个地址的数据包。在一对多的数据传输中，IPv6多播会比单播更有效，因为它只需要发送一个数据包，而不是发送多个单播数据包。在具有多播功能的网络中，任何主机，不管它位于网络中的何处，都可以向任何多播地址发送多播通信流，为支持这种功能，网络中的主机和路由器都必须支持多播通信流。<BR><STRONG>2.&nbsp; IPv6多播概述</STRONG><BR>&nbsp;&nbsp;&nbsp; 在IPv6多播概念中还包括以下要点：<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 侦听特定IPv6多播地址的多个主机的集合，称为多播组；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 多播组成员的身份是动态的，主机可以在任何时候加入或离开一个多播组；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 一个多播组中的成员数是没有限制的；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 多播组可以跨越多个IPv6路由器，即跨越多个子网。这种配置既要求IPv6路由器支持IPv6多播，也要求主机具有通过与路由器的交互来注册自己的能力。主机注册自己是通过MLD协议来完成的；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 不是多播组成员的主机，也可以向一个多播地址发送多播通信流；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; IPv6多播地址由格式前缀1111 1111（0xFF）来标识，它可以具有不同的范围。<BR><STRONG>二.&nbsp;IPv6多播地址<BR>1.&nbsp; 多播地址结构</STRONG><BR>&nbsp;&nbsp;&nbsp; 在IPv6中，多播通信流的运行方式与其在IPv4中一样。任意位置上的IPv6节点可以侦听任意IPv6多播地址上的多播通信流。IPv6节点可以同时侦听多个多播地址。节点可以随时加人或离开一个多播组。多播地址不能用作源地址或者路由选项头中的中间目的地址。多播地址的结构如图4-1所示：</P>
<P align=center><IMG src="../upload/1223269760828_pic.gif"></P>
<P align=center>图4-1&nbsp; 多播地址结构</P>
<P>&nbsp;&nbsp;&nbsp; 多播地址结构中的各个字段含义如下：<BR>&nbsp;&nbsp;&nbsp; 1111 1111：多播地址的格式前缀是1111 1111。因此一个IPv6多播地址总是以FF开始。<BR>&nbsp;&nbsp;&nbsp; 标记：其中高位的三个标志被预留，在初始化时为零。第四位为T标志，若T标志为0，则表示该地址是一个永久分配的多播地址，由全球互联网权威组织（IANA）统一分配；T标志若为1，则标识该地址是一个非永久分配的多播地址。<BR>&nbsp;&nbsp;&nbsp; 范围：决定该多播地址的有效范围。详细情况如表4-1所示：</P>
<P align=center>表4-1&nbsp; 多播地址范围字段值与其范围</P>
<P align=center><IMG src="../upload/1223269768140_pic.gif"></P>
<P>&nbsp;&nbsp;&nbsp; 例如：多播地址为FF02::2的通信流具有链路本地范围。IPv6路由器从来不会把这个通信流转发到本地链路之外。<BR>&nbsp;&nbsp;&nbsp; 组ID：用以标识多播组，并且在当前范围内是惟一的。永久分配的组ID是不受当前范围限制的。临时组ID只与特定的范围相关。从FF01::到FF0F::的多播地址是保留的专用地址。<BR>&nbsp;&nbsp;&nbsp; 为标识节点本地和链路本地范围内的所有节点，特别定义了一些多播地址，如表4-2所示：</P>
<P align=center>表4-2&nbsp; 节点本地和链路本地范围内的特殊多播地址</P>
<P align=center><IMG src="../upload/1223269774734_pic.gif"></P>
<P>&nbsp;&nbsp;&nbsp; 为标识节点本地，链路本地和站点本地范围内的所有路由器，特别定义了一些多播地址，如表4-3所示：</P>
<P align=center>表4-3&nbsp; 节点本地，链路本地和站点本地范围内的特殊多播地址</P>
<P align=center><IMG src="../upload/1223269781906_pic.gif"></P>
<P><STRONG>2.&nbsp; IPv6多播地址映射为以太网地址</STRONG><BR>&nbsp;&nbsp;&nbsp; 在以太网链路上发送IPv6多播数据包时，对应的目的地址是0x33-33-mm-mm-mm-mm，其中mm-mm-mm-mm是IPv6多播地址的后32位的一个直接映射。如图4-2所示：</P>
<P align=center><IMG src="../upload/1223625729578_pic.gif"></P>
<P align=center>图4-2&nbsp; IPv6多播MAC地址的生成</P>
<P>&nbsp;&nbsp;&nbsp; 根据IPv6多播地址映射到以太网多播MAC地址的方法，RFC2373建议把IPv6多播地址中的低32位分配给组ID，然后把组ID字段中的剩余位都置为0。通过使用低32位，每个组ID都映射到一个惟一的以太网多播MAC地址。如图4-3所示：</P>
<P align=center><IMG src="../upload/1223269797187_pic.gif"></P>
<P align=center>图4-3&nbsp; 推荐的多播地址</P>
<P><STRONG>3.&nbsp; 请求节点地址</STRONG><BR>&nbsp;&nbsp;&nbsp; 请求节点多播地址由前缀FF02::1:FF00:0/104和单播IPv6地址的最后24位构成。例如，节点A的链路本地地址是FE80::2AA:FF:FE28:9C5A，则相应的请求节点多播地址为FF02::1:FF28:9C5A。请求节点地址在进行链路层地址解析时，对于一个已知的IPv6地址，进行链路层地址解析，提高了查询网络节点的效率。使用请求节点多播地址的结果是，不再使用会干扰网络上所有节点的机制。例如，A节点已知B的IPv6地址，则A若想知道B的链路层地址只需将邻节点请求报文发往B相应的请求节点地址即可。</P></td>             </tr>           </table>  </td> </tr> </table> </body> </html> <script> if(window.HTMLElement) {     HTMLElement.prototype.__defineSetter__("outerHTML",function(sHTML){         var r=this.ownerDocument.createRange();         r.setStartBefore(this);         var df=r.createContextualFragment(sHTML);         this.parentNode.replaceChild(df,this);         return sHTML;         });      HTMLElement.prototype.__defineGetter__("outerHTML",function(){      var attr;         var attrs=this.attributes;         var str="<"+this.tagName.toLowerCase();         for(var i=0;i<attrs.length;i++){             attr=attrs[i];             if(attr.specified)                 str+=" "+attr.name+'="'+attr.value+'"';             }         if(!this.canHaveChildren)             return str+">";         return str+">"+this.innerHTML+"</"+this.tagName.toLowerCase()+">";         });           HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){   switch(this.tagName.toLowerCase()){             case "area":             case "base":          case "basefont":             case "col":             case "frame":             case "hr":             case "img":             case "br":             case "input":             case "isindex":             case "link":             case "meta":             case "param":             return false;         }         return true;       }); }  function showMe(i) {  	objHtml=document.all["s"+i].innerHTML; 	date=new Date(); 	if(navigator.userAgent.indexOf("MSIE")>0) 		window.status="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	else 		top.document.title="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	}  	if(navigator.userAgent.indexOf("MSIE")>0) 	var objects=document.all.tags("OBJECT"); 	else 	var objects=document.getElementsByTagName("OBJECT"); 	for(i=0;i<objects.length;i++) { objects[i].style.width="100%"; objects[i].outerHTML="<a href=# onclick=\"showMe("+i+")\">动画演示</a><span id=s"+i+" style=\"display:none\">"+objects[i].outerHTML+"</span>"; } var iHtml=document.body.innerHTML;  </script> 