<html> <head> <meta http-equiv="Content-Type" content="text/html; charset=gb2312" /> <title></title> <link href="inc/style.css" rel="stylesheet" type="text/css"> </head>  <body class=infobody> <table width="100%" height="100%" cellspacing="0">  <tr>  <td valign="top"> <table>   <tr>   <td height=25></td>   </tr>           <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="border-bottom:#1873b5 solid 1px">             <tr><td style="background-image:url(images/cinfo_left.GIF);display:" width="5"></td>               <td width="86" height="28" style="padding-left:4px;padding-right:4px;background-image:url(images/cinfo_center.GIF);color:#3081bd;text-align:center;padding-bottom:0px;padding-top:4px;display:"><nobr>内容摘要</nobr></td> <td style="background-image:url(images/cinfo_right.GIF);display:" width="5"></td>               <td>&nbsp;</td>             </tr>           </table>           <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" style="border:#1873b5 solid 1px;border-top:0px">             <tr>               <td bgcolor="#F5FAFA" style="padding-left:20;padding-right:20px" id="ptitle"><P>五.&nbsp;IPv6路由表<BR>六.&nbsp;数据包转发过程</P></td>             </tr>           </table> <table>   <tr>   <td height=25></td>   </tr>           <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="border-bottom:#1873b5 solid 1px">             <tr><td style="background-image:url(images/cinfo_left.GIF);display:" width="5"></td>               <td width="86" height="28" style="padding-left:4px;padding-right:4px;background-image:url(images/cinfo_center.GIF);color:#3081bd;text-align:center;padding-bottom:0px;padding-top:4px;display:"><nobr>相关内容</nobr></td> <td style="background-image:url(images/cinfo_right.GIF);display:" width="5"></td>               <td>&nbsp;</td>             </tr>           </table>           <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" style="border:#1873b5 solid 1px;border-top:0px">             <tr>               <td bgcolor="#F5FAFA" style="padding-left:20;padding-right:20px" id="ptitle"><STRONG>五.&nbsp;IPv6路由表</STRONG><BR>&nbsp;&nbsp;&nbsp; 路由表是节点转发IP数据包时决定下一跳地址的依据，IPv6路由表中存储了IPv6的网络前缀，以及如何（直接或间接）到达它们的信息。系统在查看IPv6路由表之前，会首先在目标高速缓存中检查是否存在一个与将要转发的IPv6数据包的目的地址相匹配的表项。如果在目标高速缓存中不存在与目的地址相匹配的路由表项，则使用路由表来确定转发的下一跳地址。<BR>&nbsp;&nbsp;&nbsp; 在路由表中存储的信息主要有：<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 用于转发数据包的接口（下一跳接口）：<BR>&nbsp;&nbsp;&nbsp; 接口标识了一个用于将数据包转发给目标或下一跳路由器的物理或逻辑接口。<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 下一跳地址：<BR>&nbsp;&nbsp;&nbsp; 对于直接发送（目的地址在本地链路上），下一跳地址就是数据包的目的地址。对于间接发送（目的地址不在本地链路上），下一跳地址是一个路由器的地址。<BR>&nbsp;&nbsp;&nbsp; 在确定了下一跳接口和地址后，就要更新目标高速缓存。其后发送到这个目的地址的数据包都使用这个目标高速缓存表项，而不用再去查看路由表。<BR>IPv6路由表的条目可以存储以下类型的路由：<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 直接连接的网络路由：<BR>&nbsp;&nbsp;&nbsp; 这些路由是直接连接的子网的网络前缀，这些子网的前缀长度通常为64位。<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 远程网络路由：<BR>这些路由不是直接连接，但通过其它路由器可以到达的子网的网络前缀。远程网络路由可以是子网的网络前缀（通常前缀长度为64位），也可以是一个地址空间的前缀（通常前缀长度小于64位）。<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 主机路由：<BR>&nbsp;&nbsp;&nbsp; 主机路由是到达某一特定IPv6地址的路由。主机路由使得路由可以基于每个IPv6地址。对于主机路由来说，路由前缀是一个具有128位前缀长度的特定的IPv6地址。<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 默认路由：<BR>&nbsp;&nbsp;&nbsp; 当找不到到达某一指定网络或主机的路由时，就会使用默认路由。默认路由的前缀为::/0。<BR><STRONG>六.&nbsp;数据包转发过程</STRONG><BR>&nbsp;&nbsp;&nbsp; 为使相邻节点间的交互更为方便，RFC 2461 定义了以下的概念主机数据结构：<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 邻节点高速缓存：<BR>&nbsp;&nbsp;&nbsp; 邻节点高速缓存存储每个邻节点的链路上IP地址、它的链路层地址和一个表示邻节点可到达状态的标志。邻节点高速缓存相当于IPv4的ARP高速缓存。<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 目标高速缓存：<BR>&nbsp;&nbsp;&nbsp; 目标高速缓存存储的是最近有信息发送到的目标的下一跳IP地址。在目标高速缓存中的每一项都含有目标IP地址（本地或远程）、先前解析的下一跳IP地址和目标的路径MTU。<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 默认路由器列表：<BR>&nbsp;&nbsp;&nbsp; 默认路由器列表中包含了与链路上的路由器相对应的IP地址，这些路由器或者是发送了路由器公告报文的路由器，或者是有资格用作默认路由器的那些路由器。<BR>主机发送数据包的路由算法如图6-11所示： 
<P align=center><IMG src="../upload/1223272799062_pic.gif"></P>
<P align=center>图6-11&nbsp; 主机发送算法</P></td>             </tr>           </table>  </td> </tr> </table> </body> </html> <script> if(window.HTMLElement) {     HTMLElement.prototype.__defineSetter__("outerHTML",function(sHTML){         var r=this.ownerDocument.createRange();         r.setStartBefore(this);         var df=r.createContextualFragment(sHTML);         this.parentNode.replaceChild(df,this);         return sHTML;         });      HTMLElement.prototype.__defineGetter__("outerHTML",function(){      var attr;         var attrs=this.attributes;         var str="<"+this.tagName.toLowerCase();         for(var i=0;i<attrs.length;i++){             attr=attrs[i];             if(attr.specified)                 str+=" "+attr.name+'="'+attr.value+'"';             }         if(!this.canHaveChildren)             return str+">";         return str+">"+this.innerHTML+"</"+this.tagName.toLowerCase()+">";         });           HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){   switch(this.tagName.toLowerCase()){             case "area":             case "base":          case "basefont":             case "col":             case "frame":             case "hr":             case "img":             case "br":             case "input":             case "isindex":             case "link":             case "meta":             case "param":             return false;         }         return true;       }); }  function showMe(i) {  	objHtml=document.all["s"+i].innerHTML; 	date=new Date(); 	if(navigator.userAgent.indexOf("MSIE")>0) 		window.status="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	else 		top.document.title="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	}  	if(navigator.userAgent.indexOf("MSIE")>0) 	var objects=document.all.tags("OBJECT"); 	else 	var objects=document.getElementsByTagName("OBJECT"); 	for(i=0;i<objects.length;i++) { objects[i].style.width="100%"; objects[i].outerHTML="<a href=# onclick=\"showMe("+i+")\">动画演示</a><span id=s"+i+" style=\"display:none\">"+objects[i].outerHTML+"</span>"; } var iHtml=document.body.innerHTML;  </script> 