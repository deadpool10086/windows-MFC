<html> <head> <meta http-equiv="Content-Type" content="text/html; charset=gb2312" /> <title></title> <link href="inc/style.css" rel="stylesheet" type="text/css"> </head>  <body class=infobody> <table width="100%" height="100%" cellspacing="0">  <tr>  <td valign="top"> <table>   <tr>   <td height=25></td>   </tr>           <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="border-bottom:#1873b5 solid 1px">             <tr><td style="background-image:url(images/cinfo_left.GIF);display:" width="5"></td>               <td width="86" height="28" style="padding-left:4px;padding-right:4px;background-image:url(images/cinfo_center.GIF);color:#3081bd;text-align:center;padding-bottom:0px;padding-top:4px;display:"><nobr>内容摘要</nobr></td> <td style="background-image:url(images/cinfo_right.GIF);display:" width="5"></td>               <td>&nbsp;</td>             </tr>           </table>           <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" style="border:#1873b5 solid 1px;border-top:0px">             <tr>               <td bgcolor="#F5FAFA" style="padding-left:20;padding-right:20px" id="ptitle">七. IPv6接口标识符<BR>八.&nbsp;Windows、Linux操作系统对IPv6的支持</td>             </tr>           </table> <table>   <tr>   <td height=25></td>   </tr>           <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="border-bottom:#1873b5 solid 1px">             <tr><td style="background-image:url(images/cinfo_left.GIF);display:" width="5"></td>               <td width="86" height="28" style="padding-left:4px;padding-right:4px;background-image:url(images/cinfo_center.GIF);color:#3081bd;text-align:center;padding-bottom:0px;padding-top:4px;display:"><nobr>相关内容</nobr></td> <td style="background-image:url(images/cinfo_right.GIF);display:" width="5"></td>               <td>&nbsp;</td>             </tr>           </table>           <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" style="border:#1873b5 solid 1px;border-top:0px">             <tr>               <td bgcolor="#F5FAFA" style="padding-left:20;padding-right:20px" id="ptitle"><P><STRONG>七.&nbsp;IPv6接口标识符</STRONG><BR>&nbsp;&nbsp;&nbsp; 当前定义的IPv6单播地址的后64位是接口标识符，它只在带有64位前缀的IPv6地址中才有。在IPv6中，接口ID是有固定长度的。这个长度固定为64位，是为了便于与当前大多数局域网技术所使用的48位MAC地址进行地址映射，以及与IEEE1394和今后局域网技术所使用的64位MAC地址进行地址映射。根据RFC2373的定义，所有使用从001到111前缀的单播地址，都必须使用出自扩展惟一标识符EUI-64地址的64位接口标识符。64位的EUI-64地址由IEEE定义。EUI-64地址或者是分配给一块网卡，或者是来自于IEEE 802地址。<BR>&nbsp;&nbsp;&nbsp; IEEE EUI-64地址表示一个用于网络接口寻址的新标准。公司ID仍是24位，但扩展ID增加到了40位。EUI-64地址中的U/L位和I/G位的用途与IEEE 802地址是一样的。EUI-64地址的结构如图1-4所示：</P>
<P align=center><IMG src="../upload/1237259111765_pic.bmp"></P>
<P align=center>图1-4&nbsp; EUI-64地址结构</P>
<P>&nbsp;&nbsp;&nbsp; 为从IEEE 802地址创建EUI-64地址，需要将16位的1111111111111110（0xFFFE）插入到IEEE802地址公司ID和扩展ID之间。<BR>&nbsp;&nbsp;&nbsp; 为获得IPv6单播地址的64位接口标识符，首先要对EUI-64地址中的U/L位求反（如果它在EUI地址中为1，则将其置为0；如果它在EUI地址中是0，则将其置为1）。例如，主机A的以太网MAC地址是00-AA-00-3F-2A-1C。首先在第三个字节和第四个字节之间插入FF-FE，把以太网MAC地址转换为EUI-64地址：00-AA-00-FF-FE-3F-2A-1C。然后对第一个字节的第七位，即U/L位，求反。最后结果是02-AA-00-FF-FE-3F-2A-1C，用冒号十六进制表示就是接口标识符2AA:FF:FE3F:2A1C。最终对应网卡MAC地址00-AA-00-3F-2A-1C的链路本地地址就是FE80::2AA:FF:FE3F:2A1C。<BR>&nbsp;&nbsp;&nbsp; IEEE802地址到IPv6接口标识符的转换如图1-5所示：</P>
<P align=center><IMG src="../upload/1223625695859_pic.gif"></P>
<P align=center>图1-5&nbsp; IEEE802地址到IPv6接口标识符的转换</P>
<P><STRONG>八.&nbsp;Windows、Linux操作系统对IPv6的支持</STRONG><BR>&nbsp;&nbsp;&nbsp; Windows XP、Windows Server 2003对IPv6已有很好的支持，但不全面。可支持的有：<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 基本的协议栈支持；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 6to4；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; ISATAP协议；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 6over4；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 端口代理协议；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 临时地址；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 静态路由器支持；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 地址选择；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 路由器公告中的站点前缀。<BR>&nbsp;&nbsp;&nbsp; Linux系统对IPv6协议的支持较Windows更加全面，除可支持以上功能，还可支持DHCPv6协议、动态路由协议、移动IPv6等。<BR>&nbsp;&nbsp;&nbsp; Windows XP、Windows Server 2003可通过netsh命令配置IPv6协议。我们可以用它们来查询和配置IPv6的接口、地址、高速缓存和路由。<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; netsh int ipv6 install 安装IPv6协议栈；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; netsh int ipv6 uninstall 卸载IPv6协议栈；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 其它，请参见系统中对netsh命令的使用说明（使用命令 netsh -?）。<BR>&nbsp;&nbsp;&nbsp; Linux下：<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; modprobe ipv6安装IPv6协议栈；<BR>&nbsp;&nbsp;&nbsp; ●&nbsp; 通过“ip”命令来查询和配置IPv6的接口、地址、高速缓存和路由。</P></td>             </tr>           </table>  </td> </tr> </table> </body> </html> <script> if(window.HTMLElement) {     HTMLElement.prototype.__defineSetter__("outerHTML",function(sHTML){         var r=this.ownerDocument.createRange();         r.setStartBefore(this);         var df=r.createContextualFragment(sHTML);         this.parentNode.replaceChild(df,this);         return sHTML;         });      HTMLElement.prototype.__defineGetter__("outerHTML",function(){      var attr;         var attrs=this.attributes;         var str="<"+this.tagName.toLowerCase();         for(var i=0;i<attrs.length;i++){             attr=attrs[i];             if(attr.specified)                 str+=" "+attr.name+'="'+attr.value+'"';             }         if(!this.canHaveChildren)             return str+">";         return str+">"+this.innerHTML+"</"+this.tagName.toLowerCase()+">";         });           HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){   switch(this.tagName.toLowerCase()){             case "area":             case "base":          case "basefont":             case "col":             case "frame":             case "hr":             case "img":             case "br":             case "input":             case "isindex":             case "link":             case "meta":             case "param":             return false;         }         return true;       }); }  function showMe(i) {  	objHtml=document.all["s"+i].innerHTML; 	date=new Date(); 	if(navigator.userAgent.indexOf("MSIE")>0) 		window.status="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	else 		top.document.title="cmdOpen,"+date.getTime()+","+(objHtml.substring(objHtml.lastIndexOf("\"",objHtml.indexOf(".swf\""))+1,objHtml.indexOf(".swf\"")+4)); 	}  	if(navigator.userAgent.indexOf("MSIE")>0) 	var objects=document.all.tags("OBJECT"); 	else 	var objects=document.getElementsByTagName("OBJECT"); 	for(i=0;i<objects.length;i++) { objects[i].style.width="100%"; objects[i].outerHTML="<a href=# onclick=\"showMe("+i+")\">动画演示</a><span id=s"+i+" style=\"display:none\">"+objects[i].outerHTML+"</span>"; } var iHtml=document.body.innerHTML;  </script> 